# Config use

This configuration lets the main script know where to get tokens from, what consent should be requested from the authentication authority, what endpoint to query along with the subscription, resource group and workspace where sentinel is configured in.

You can run the MSAL python script with a JSON configuration file by executing:
**Sentinel_get_post_msal.py Sentinel_parameters.json**

## Configuration example
The configuration file (Sentinel_parameters.json) would look like this (excluding the // comments):

```
{
  "authority": "https://login.microsoftonline.us/Enter_the_Tenant_NAME(or ID)_Here",
  "client_id": "your_client_id(graph api app with access to security insights)",
  "scope": [
    "https://management.usgovcloudapi.net/.default"
  ],
  // For more information about scopes for an app, refer:
  // https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow#second-case-access-token-request-with-a-certificate"
  "secret": "The secret generated by AAD during your confidential app registration",
  // For information about generating client secret, refer:
  // https://github.com/AzureAD/microsoft-authentication-library-for-python/wiki/Client-Credentials#registering-client-secrets-using-the-application-registration-portal
  "endpoint": "https://management.usgovcloudapi.net",
  "subscription": "Subscription ID where Sentinel is enabled",
  "resourcegroup": "Resource group NAME where Sentinel is located",
  "workspace": "Workspace NAME where sentinel is located"
}
```

## Explanation
- authority: Authentication authority that will be used to grab a token, along with the Tenant that the application will operate on. Could be in GUID format or the tenant's azure AD name.
- client_id: ID of the Azure AD application.
- scope: Application resource identifier which is the App's ID URI with /.default appended. This lets the authority know which resource the token should be issued for. The "/.default" scope means that the resource should return a token with the full static consent list available from the resource as listed in the application's API permissions. And example of another valid scope would be **https://graph.microsoft.us/User.Read.All**. For more information on scopes and consent go here: https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-permissions-and-consent#the-default-scope
- secret: Azure AD application secret generated.
- endpoint: Endpoint that will be queried when Sentinel_get_post_msal.py is run. A different example of an endpoint to query would be: **https://management.usgovcloudapi.net**
- subscription: ID can be gathered by going to **Log Analytics workspace (where Sentinel is enabled) -> Overview (Copy Subscription ID).**
- resourcegroup: RG name can be gathered by going to **Azure Sentinel workspaces -> (Copy text under ResourceGroup where Sentinel located).**
- workspace: Workspace name can be gathered by going to **Log Analytics workspace (where Sentinel is enabled) -> Overview (Copy Worspace Name).**